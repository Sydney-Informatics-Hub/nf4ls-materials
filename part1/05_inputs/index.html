
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../04_execution/">
      
      
        <link rel="next" href="../06_params/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>1.5 Inputs and channels - Nextflow for the Life Sciences</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-TNWWV3HK57"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-TNWWV3HK57",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-TNWWV3HK57",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#15-inputs-and-channels" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Nextflow for the Life Sciences" class="md-header__button md-logo" aria-label="Nextflow for the Life Sciences" data-md-component="logo">
      
  <img src="../../assets/usyd-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nextflow for the Life Sciences
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.5 Inputs and channels
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Sydney-Informatics-Hub/hello-nextflow-2025" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Sydney-Informatics-Hub/hello-nextflow-2025
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Nextflow for the Life Sciences" class="md-nav__button md-logo" aria-label="Nextflow for the Life Sciences" data-md-component="logo">
      
  <img src="../../assets/usyd-logo.png" alt="logo">

    </a>
    Nextflow for the Life Sciences
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Sydney-Informatics-Hub/hello-nextflow-2025" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Sydney-Informatics-Hub/hello-nextflow-2025
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Part 1
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part 1
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00_whynextflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.0 Why Nextflow?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.1 Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_helloworld/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.2 Hello World!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_hellonf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.3 Writing your first pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.4 Running pipelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    1.5 Inputs and channels
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    1.5 Inputs and channels
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#151-passing-information-through-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.1 Passing information through channels
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.5.1 Passing information through channels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#queue-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Queue channels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Value channels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#152-creating-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.2 Creating channels
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#153-adding-channels-to-our-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.3 Adding channels to our pipeline
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#154-adding-channels-as-process-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.4 Adding channels as process inputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#155-using-nextflow-variables-within-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.5 Using Nextflow variables within scripts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#156-running-processes-on-multiple-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.6 Running processes on multiple inputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#157-a-note-about-multiple-input-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.7 A note about multiple input channels
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#158-faq-can-i-use-the-publishdir-as-an-input-to-a-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.8 FAQ: Can I use the publishDir as an input to a process?
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_params/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.6 Parameters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.7 Adding processes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_dynamic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.8 Dynamic naming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_outro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1.9 Wrapping up
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Part 2
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Part 2
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/00_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.0 Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/01_salmon_idx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.1 Our first process and container
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/02_fastqc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.2 Samplesheets, operators, and groovy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/03_quant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.3 Multiple process inputs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/04_multiqc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.4 Combining channels, multiple process outputs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2/05_scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2.5 Upscaling to multiple samples and introspection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supporting materials
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#151-passing-information-through-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.1 Passing information through channels
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.5.1 Passing information through channels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#queue-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Queue channels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Value channels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#152-creating-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.2 Creating channels
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#153-adding-channels-to-our-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.3 Adding channels to our pipeline
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#154-adding-channels-as-process-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.4 Adding channels as process inputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#155-using-nextflow-variables-within-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.5 Using Nextflow variables within scripts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#156-running-processes-on-multiple-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.6 Running processes on multiple inputs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#157-a-note-about-multiple-input-channels" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.7 A note about multiple input channels
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#158-faq-can-i-use-the-publishdir-as-an-input-to-a-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.5.8 FAQ: Can I use the publishDir as an input to a process?
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="15-inputs-and-channels">1.5 Inputs and Channels</h1>
<div class="admonition info">
<p class="admonition-title">Learning objectives</p>
<ol>
<li>Describe the differences between Nextflow channel types</li>
<li>Apply input blocks in process definitions</li>
<li>Create channels using channel factories such as <code>Channel.of()</code></li>
<li>Implement process calls that take single and multiple inputs via channels</li>
<li>Evaluate correct vs incorrect input strategies (e.g. <em>why not to use</em> <code>publishDir</code> as an input)</li>
</ol>
</div>
<p>So far, you've been emitting a text string ('Hello World!') that has been hardcoded into the script block. In a more realistic situation, you might want to pass a variable input to your script, much like you pass files to command line tools for analysis.</p>
<p>Here you're going to to add some flexibility by introducing <strong>channels</strong> to your workflow and an <strong>input definition</strong> to your <code>SAYHELLO</code> process.</p>
<h2 id="151-passing-information-through-channels">1.5.1 Passing information through channels</h2>
<p>In Nextflow, processes primarily communicate through <strong>channels</strong>. Channels are essentially the 'pipes' of our pipeline, providing a way for data to flow between our processes and defining the overall structure of the workflow.</p>
<p>Channels allow us to handle inputs efficiently by defining which data should
be taken from one step to another. Channels are one of Nextflows key features
that allow us to run jobs in parallel, as well as many other benefits.</p>
<p><img alt="" src="../img/channel_examples.png" /></p>
<p>This image illustrates a few use cases of channels that we will implement:</p>
<ul>
<li><strong>1</strong> shows our current <code>hello-world.nf</code> pipeline where the <code>SAYHELLO</code> process always
prints a file called <code>output.txt</code> that contains <code>Hello World!</code></li>
<li><strong>2</strong> shows how you can provide a text input to a process, via a channel,
to change what is redirected into <code>output.txt</code>. In this example, <code>'Hello World!'</code>
is replaced with <code>'Bonjour'</code>.</li>
<li><strong>3</strong> shows how to use the output of a process (<code>SAYHELLO</code>) as the input of
another process. The <code>CONVERTUPPER</code> process replaces all lower case characters
in <code>output.txt</code> to uppercase, and saves it to a different file called <code>upper.txt</code>.</li>
</ul>
<p>There are two kinds of channels: <strong>queue channels</strong> and <strong>value channels</strong>.</p>
<h3 id="queue-channels">Queue channels</h3>
<p>Queue channels are the more common type of channel. It holds a series, or queue,
of values and passes them into a process one at a time. Values you can expect in a queue
channel can be file paths, or values such as strings and numbers. Generally,
a queue channel contains values of the same type.</p>
<p>One important behaviour of queue channels is that the order of the values is
<strong>non-deterministic</strong>. You will not know ahead of time the order of values
within the queue due to it's 'first-in, first-out' (FIFO) nature. More
on this in the following sections.</p>
<p>A value in a queue channel can only be used (run) once in a process.</p>
<h3 id="value-channels">Value channels</h3>
<p>Value channels, as their name suggests, simply store a value. Importantly:</p>
<ul>
<li>Value channels can be bound (i.e. assigned) with one and only one value.</li>
<li>The assigned value can be used multiple times.</li>
</ul>
<p>When a value channel is passed as an input to a process, its value will be used for every run of that process.</p>
<h2 id="152-creating-channels">1.5.2 Creating channels</h2>
<p>Channels are created in one of two ways. The first is as outputs of processes. Each entry in the <code>output</code> block of a process creates a separate channel that can be accessed with <code>&lt;process_name&gt;.out</code> - or, in the case of named outputs, with <code>&lt;process_name&gt;.out.output_name</code>.</p>
<p>The other way to create channels is with special functions called <strong>channel factories</strong>. There are numerous types of channel factories which can be utilised for creating different channel types and data types. The most common channel factories you will use are:</p>
<ul>
<li><code>Channel.of()</code></li>
<li><code>Channel.fromPath()</code></li>
<li><code>Channel.fromFilePairs()</code>.</li>
</ul>
<p>The latter two are fairly self explanatory, creating channels of file paths and pairs of file paths, respectively. The <code>Channel.of()</code> factory is a much more generic method used to create a channel of whatever values are passed to it.</p>
<p>For example, an exercise we will be working through is to create a channel called <code>greeting_ch</code> that contains three values - 'Hello World!', 'Bonjour le monde!', 'Holà mundo':</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">greeting_ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Bonjour le monde!&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Holà mundo&#39;</span><span class="o">)</span>
</code></pre></div>
<p>A process consuming this channel would run three times - once for each value.</p>
<h2 id="153-adding-channels-to-our-pipeline">1.5.3 Adding channels to our pipeline</h2>
<p>You're going to start by creating a channel with the <code>Channel.of()</code> channel factory that will contain your greeting.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can build different kinds of channels depending on the shape of the input data.</p>
</div>
<p>Channels need to be created within the <code>workflow</code> definition.</p>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Create a channel named <code>greeting_ch</code> with the 'Hello World!' greeting. Create <code>greeting_ch</code>
before the process that runs it.</p>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><span class="filename">hello-world.nf</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="hll"><span class="w">    </span><span class="c1">// Create a channel for inputs</span>
</span><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="hll"><span class="w">    </span><span class="n">greeting_ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="o">)</span>
</span><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="c1">// Emit a greeting</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="n">SAYHELLO</span><span class="o">()</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="o">}</span>
</code></pre></div>
</details>
</div>
<h2 id="154-adding-channels-as-process-inputs">1.5.4 Adding channels as process inputs</h2>
<p>Before <code>greeting_ch</code> can be passed to the <code>SAYHELLO</code> process as an input, you must first add an <strong>input block</strong> in the process definition.</p>
<p>The inputs in the input block, much like the output block, must have a qualifier and a name:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nl">input:</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">qualifier</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">input</span><span class="w"> </span><span class="n">name</span><span class="o">&gt;</span>
</code></pre></div>
<p>Input names can be treated like a variable, and while the name is arbitrary, it should be recognisable.</p>
<p>No quote marks are needed for <strong>variable inputs</strong>. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>input:
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>val greeting
</code></pre></div>
<p>Similar to the output qualifiers discussed in the previous chapter, there are several different input qualifiers, with some of the more common ones being:</p>
<ul>
<li><code>val</code>: A value, such as a string or number.</li>
<li><code>path</code>: A file path.</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Add an <code>input</code> block to the <code>SAYHELLO</code> process with an input value. Update the comment at the same time.</p>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><span class="filename">hello-world.nf</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="hll"><span class="c1">// Use echo to print a string and redirect to output.txt</span>
</span><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">process</span><span class="w"> </span><span class="n">SAYHELLO</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">publishDir</span><span class="w"> </span><span class="s1">&#39;results&#39;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="hll"><span class="w">    </span><span class="nl">input:</span>
</span><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="hll"><span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="n">greeting</span>
</span><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="n">path</span><span class="w"> </span><span class="s1">&#39;output.txt&#39;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="s2">    echo &#39;Hello World!&#39; &gt; output.txt</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="o">}</span>
</code></pre></div>
</details>
</div>
<p>The <code>SAYHELLO</code> process is now expecting an input value.</p>
<p>The <code>greeting_ch</code> channel can now be supplied to the <code>SAYHELLO()</code> process within the workflow block:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">SAYHELLO</span><span class="o">(</span><span class="n">greeting_ch</span><span class="o">)</span>
</code></pre></div>
<p>Without this, Nextflow will throw an error.</p>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Add the <code>greeting_ch</code> as an input for the <code>SAYHELLO</code> process.</p>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><span class="filename">hello-world.nf</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="c1">// Create a channel for inputs</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="n">greeting_ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="o">)</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="c1">// Emit a greeting</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="hll"><span class="w">    </span><span class="n">SAYHELLO</span><span class="o">(</span><span class="n">greeting_ch</span><span class="o">)</span>
</span><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="o">}</span>
</code></pre></div>
</details>
</div>
<h2 id="155-using-nextflow-variables-within-scripts">1.5.5 Using Nextflow variables within scripts</h2>
<p>The final piece is to update the <code>script</code> block to use the <code>input</code> value.</p>
<p>Each input can be accessed as a variable via the name in its definition. Within the script block, this is done by prepending a <code>$</code> character to the input name:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nl">script:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="s2">echo &#39;$greeting&#39; &gt; output.txt</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>
<p>The <code>'</code> quotes around <code>$greeting</code> are required by the <code>echo</code> command to treat the greeting as a single string.</p>
<div class="admonition question">
<p class="admonition-title">Exercises</p>
<ol>
<li>Update <code>hello-world.nf</code> to use the greeting input.</li>
</ol>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><span class="filename">hello-world.nf</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// Use echo to print &#39;Hello World!&#39; and redirect to output.txt</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">process</span><span class="w"> </span><span class="n">SAYHELLO</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="n">publishDir</span><span class="w"> </span><span class="s1">&#39;results&#39;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="n">greeting</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="n">path</span><span class="w"> </span><span class="s1">&#39;output.txt&#39;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="hll"><span class="s2">    echo &#39;$greeting&#39; &gt; output.txt</span>
</span><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="o">}</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="c1">// Create a channel for inputs</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">    </span><span class="n">greeting_ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="o">)</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">    </span><span class="c1">// Emit a greeting</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">    </span><span class="n">SAYHELLO</span><span class="o">(</span><span class="n">greeting_ch</span><span class="o">)</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="o">}</span>
</code></pre></div>
</details>
<p><ol start="2">
    <li> Save, and run the pipeline (<code>nextflow run hello-world.nf</code>). Inspect <code>results/output.txt</code>.</li>
</ol></p>
<details class="solution">
<summary>Solution</summary>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>cat<span class="w"> </span>results/output.txt
</code></pre></div>
<div class="highlight"><span class="filename">Output.txt</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="go">Hello World! </span>
</code></pre></div></p>
<p>The process will still function the same and produce the same output, but instead
takes the values in <code>greeting_ch</code> (<code>'Hello World!'</code>) as input.</p>
</details>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Similar to the <code>output</code> block in a process, the <code>input</code> does not
<strong>determine</strong> the <code>input</code> of process. Recall that it simply <em>declares</em> what input should be expected based on the logic in side the <code>script</code> block. </p>
</div>
<p><strong>Yes! Your pipeline now uses an input channel!</strong></p>
<h2 id="156-running-processes-on-multiple-inputs">1.5.6 Running processes on multiple inputs</h2>
<p>Now that we have a channel set up and our process has been reworked to use it, we can very easily start feeding more inputs into the channel and watch <code>SAYHELLO</code> run on each one.</p>
<p>The <code>Channel.of()</code> factory can take any number of values, separated by commas. Each one will become a separate element in the queue channel. Any process consuming that channel will run once for every element; each run will be separate and in parallel to the rest.</p>
<div class="admonition question">
<p class="admonition-title">Exercise</p>
<p>Add additional greetings to <code>greeting_ch</code>.</p>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><span class="filename">hello-world.nf</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="c1">// Create a channel for inputs</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="hll"><span class="w">    </span><span class="n">greeting_ch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;Hello world!&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Bonjour le monde!&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Holà mundo&#39;</span><span class="o">)</span>
</span><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="c1">// Emit a greeting</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">    </span><span class="n">SAYHELLO</span><span class="o">(</span><span class="n">greeting_ch</span><span class="o">)</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="o">}</span>
</code></pre></div>
</details>
</div>
<p>If you now run the workflow again, you should see that <code>SAYHELLO</code> runs three times:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Launching `main.nf` [curious_hugle] DSL2 - revision: 243f7816c2
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>executor &gt;  local (3)
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>[27/ed09aa] SAYHELLO (1) [100%] 3 of 3 ✔
</code></pre></div>
<p>Notice that by default Nextflow only prints out one line per process rather than one line <em>per run</em> of each process. Sometimes it may be useful to you to have it print out each run on a separate line. To do this, you can add the <code>-ansi-log false</code> flag to the command line:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>nextflow<span class="w"> </span>run<span class="w"> </span>hello-world.nf<span class="w"> </span>-ansi-log<span class="w"> </span><span class="nb">false</span>
</code></pre></div>
<p>The output now looks like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Launching `main.nf` [deadly_wilson] DSL2 - revision: 243f7816c2
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>[f2/84d334] Submitted process &gt; SAYHELLO (2)
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>[f4/9f72e1] Submitted process &gt; SAYHELLO (1)
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>[dc/52fa3d] Submitted process &gt; SAYHELLO (3)
</code></pre></div>
<p>There is only one <code>output.txt</code> in our <code>results/</code> folder. This is because we have hardcoded the output name.
Each time the process is run, it overwrites the existing <code>output.txt</code> and the one we see is from the last
process that was run.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you inspect your <code>output.txt</code>, it can contain any one of the greetings specified.
This is because <strong>the order that tasks are run are non-deterministic</strong>. Nextflow
tasks run on a FIFO (first-in, first-out) basis, meaning that a task will begin running
once it is ready. Different factors can impact this, but a common scenario is when 
the output of a process is ready, the downstream process that uses it as input will
be exectuted.</p>
</div>
<h2 id="157-a-note-about-multiple-input-channels">1.5.7 A note about multiple input channels</h2>
<p>The input block can be used to define multiple inputs to the process. Importantly, the number of inputs passed to the process call within the workflow must match the number of inputs defined in the process. For example:</p>
<div class="highlight"><span class="filename">example.nf</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">process</span><span class="w"> </span><span class="n">MYFUNCTION</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="n">publishDir</span><span class="w"> </span><span class="s1">&#39;results&#39;</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="n">input_1</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="n">val</span><span class="w"> </span><span class="n">input_2</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">    </span><span class="n">path</span><span class="w"> </span><span class="s1">&#39;output.txt&#39;</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">    </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="s2">    echo $input_1 $input_2 &gt; output.txt</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="o">}</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">    </span><span class="n">MYFUNCTION</span><span class="o">(</span><span class="s1">&#39;Hello&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;World!&#39;</span><span class="o">)</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="o">}</span>
</code></pre></div>
<p>If we view the file:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>cat<span class="w"> </span>output.txt
</code></pre></div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="go">Hello World!</span>
</code></pre></div></p>
<p>The main caveat when using multiple input channels is that the order of values and files can be unpredictable (non-deterministic). The best practice here is to apply a combination
of <a href="https://www.nextflow.io/docs/latest/reference/operator.html#operators">operators</a> to combine the multiple channels.
Nextflow's <a href="https://www.nextflow.io/docs/latest/process.html#multiple-input-channels">processes documentation</a> has an overview of how it works, and recommendations when it should be used in your own pipelines.</p>
<h2 id="158-faq-can-i-use-the-publishdir-as-an-input-to-a-process">1.5.8 FAQ: Can I use the <code>publishDir</code> as an input to a process?</h2>
<p>A common question about Nextflow is whether the <code>publishDir</code> can be used as an input to processes. This can sometimes seem like an attractive and useful pattern. For example, you may have several processes generating outputs that need to get collated or summarised in some way at the end of your workflow. If each process puts its final output in the <code>publishDir</code> directory, then the final summary process can simply look there for all its inputs.</p>
<p>Unfortunately, this is not good practice, and will very likely either lead to inconsistent results or not work at all. <code>publishDir</code> is not really part of the workflow itself; it's more like a "side branch" to the pipeline that acts as a convenient place to put important outputs of the workflow. There are no guarantees about when output files will get copied into <code>publishDir</code>, and Nextflow won't know to wait for files to be generated inside before running processes that rely on them.</p>
<p><img alt="Don't use publishDir as an input!" src="../img/publishdir.png" /></p>
<p>Ultimately, all processes should be working with channels as their inputs, and <code>publishDir</code> should only be used as a final output directory.</p>
<div class="admonition abstract">
<p class="admonition-title">Summary</p>
<p>Channels are one of Nextflow's most powerful features by allowing data to flow into, and between processes. In this lesson, we:</p>
<ol>
<li>Created a queue channel</li>
<li>Used the <code>val</code> input qualifer to provide a string input</li>
<li>Modified the <code>SAYHELLO()</code> process to use a channel instead of hardcoded strings</li>
<li>Ran a process with multiple values</li>
<li>Learnt the risks of using <code>publishDir</code> as a source of input (not recommended)</li>
</ol>
</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../04_execution/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 1.4 Running pipelines">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                1.4 Running pipelines
              </div>
            </div>
          </a>
        
        
          
          <a href="../06_params/" class="md-footer__link md-footer__link--next" aria-label="Next: 1.6 Parameters">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                1.6 Parameters
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>